<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Old Style Flickr</title>
    <link rel="stylesheet" href="/static/style.css">
    <script src="/static/main.js" defer></script>
</head>
<body>
  <div id="container">
    <header>
      <h1>
        <span style="color: #0063dc;">flick</span><span style="color: #ff0084;">r</span>
      </h1>
      <nav>
        <a href="/">Home</a>
              </nav>
    </header>
    <hr>
    {% if logged_in %}
      <p>You are logged in!</p>
      <form action="/logout" method="get">
        <button type="submit">Log Out</button>
      </form>
      <form method="get" action="/">
        <label for="privacy">Show: </label>
        <select name="privacy" id="privacy" onchange="this.form.submit()">
          <option value="public" {% if privacy == 'public' %}selected{% endif %}>Public</option>
          <option value="friends" {% if privacy == 'friends' %}selected{% endif %}>Friends</option>
          <option value="family" {% if privacy == 'family' %}selected{% endif %}>Family</option>
          <option value="friendsfamily" {% if privacy == 'friendsfamily' %}selected{% endif %}>Friends & Family</option>
          <option value="private" {% if privacy == 'private' %}selected{% endif %}>Private (all)</option>
        </select>
        <input type="hidden" name="page" value="{{ page }}">
      </form>
    {% else %}
      <form action="/login" method="get">
        <button type="submit">Log In with Flickr</button>
      </form>
    {% endif %}
    <hr>
    <h2>Photo Stream</h2>
    <ul class="photo-list">
      {% for photo in photos %}
      <li class="photo-row">
        {% if photo.url_q %}
          <img src="{{ photo.url_q }}" alt="{{ photo.title }}">
        {% endif %}
        <div class="photo-main">
          <div class="photo-title">{{ photo.title }}</div>
          {% if photo.description and photo.description._content %}
            <div class="photo-desc">{{ photo.description._content }}</div>
          {% endif %}
          <div class="photo-meta">
            <span>By <strong>{{ photo.ownername or photo.owner_name }}</strong></span><br>
            <span>Date uploaded: {{ photo.dateupload | int | datetimeformat }}</span><br>
            <span>Date taken: {{ photo.datetaken | datetimeformat }}</span>
          </div>
        </div>
        <div class="photo-extra">
          <div class="photo-details" id="details-{{ photo.id }}"></div>
        </div>
      </li>

      {% endfor %}
    </ul>
    <div class="pagination">
      {% if page > 1 %}
        <a href="/?page={{ page - 1 }}{% if privacy %}&privacy={{ privacy }}{% endif %}">&laquo; Prev</a>
      {% endif %}
      <span>Page {{ page }} of {{ pages }}</span>
      {% if page < pages %}
        <a href="/?page={{ page + 1 }}{% if privacy %}&privacy={{ privacy }}{% endif %}">Next &raquo;</a>
      {% endif %}
    </div>
  </div>
</body>
</html>
